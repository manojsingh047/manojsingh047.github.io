function processing(a,b){switch(a){case".":1==flagDot?($("#display").append("<p>"+numArr+"</p>"),$(this).off("click")):displayNum(a);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":displayNum(a);break;case"%":case"/":case"X":case"-":case"+":0==flagInitialOperator?$(this).off("click"):1==flagInvalidOperator?($("#display").append("<p>"+numArr+"</p>"),$(this).off("click")):displayOperator(a);break;case"=":0==flagInvalidOperator?($("this").off("click"),$("#display").append("<p>"+numArr+"</p>")):checkInvalid()&&1==countOp?($("this").off("click"),$("#display").append("<p>"+numArr+"</p>")):(equals(),flag=1);break;case"CE":CE();break;case"AC":AC()}}function displayNum(a){"."==a?(flagDot=1,numNop.push(a),numArr=numNop.join(""),$("#display").append("<p>"+numArr+"</p>"),flagInitialOperator=1):(numNop.push(a),numArr=numNop.join(""),$("#display").append("<p>"+numArr+"</p>"),flagInitialOperator=1)}function displayOperator(a){countOp++,numNop.push(a),numArr=numNop.join(""),$("#display").append("<p>"+numArr+"</p>"),operator=a,flagInvalidOperator=1,flagDot=0}function AC(){flagInitialOperator=0,flagInvalidOperator=0,flag=0,numArr=0,numNop=[],$("#display").empty()}function CE(){if(1==flag)flag=0,numArr=0,numNop=[],$("#display").empty();else{var a=numNop.pop();numArr=numNop.join(""),$("#display").append("<p>"+numArr+"</p>"),"%"!=a&&"/"!=a&&"X"!=a&&"+"!=a&&"-"!=a||(flagInvalidOperator=0)}}function checkInvalid(){return"%"==numNop[numNop.length-1]||"/"==numNop[numNop.length-1]||"X"==numNop[numNop.length-1]||"+"==numNop[numNop.length-1]||"-"==numNop[numNop.length-1]}function equals(){var a=[];switch(a=numArr.split(operator),console.log("num::   "+a),operator){case"+":result=parseFloat(a[0])+parseFloat(a[1]);break;case"-":result=parseFloat(a[0])-parseFloat(a[1]);break;case"/":result=parseFloat(a[0])/parseFloat(a[1]);break;case"X":result=parseFloat(a[0])*parseFloat(a[1]);break;case"%":result=parseFloat(a[0])%parseFloat(a[1])}$("#display").empty(),$("#display").append("<p>"+result+"</p>"),numArr=0,numNop=[],numNop.push(result),numArr=numNop.join(""),flagInvalidOperator=0,countOp=0}$(document).ready(function(){$("td").click(function(){$("#display").empty(),htmlValue=$(this).text();var a=parseInt(htmlValue);processing(htmlValue,a),console.log("### countOperator ### "+countOp)})});var htmlValue="",numNop=[],numArr=[],operator="",result=0,flag=0,flagInitialOperator=0,flagInvalidOperator=0,flagDot=0,countOp=0;